hostname {{ .ShortName }}
!
no aaa new-model
!
ip domain name lab
!
ip cef
!
ipv6 unicast-routing
!
no ip domain lookup
!
username admin privilege 15 secret admin
!
{{- if .Env.CLAB_MGMT_VRF }}
vrf definition {{ .Env.CLAB_MGMT_VRF }}
 address-family ipv4
 !
 address-family ipv6
 !
{{- end}}
interface Ethernet0/0
 {{- if .Env.CLAB_MGMT_VRF }}vrf forwarding {{ .Env.CLAB_MGMT_VRF }} {{- end}}
 ip address {{ .MgmtIPv4Address }} 255.255.255.0
 ipv6 address {{ .MgmtIPv6Address }}/{{ .MgmtIPv6PrefixLength }}
 no shutdown
!
ip forward-protocol nd
!
ip route {{ if .Env.CLAB_MGMT_VRF }}vrf {{ .Env.CLAB_MGMT_VRF }}{{end}}0.0.0.0 0.0.0.0 Ethernet0/0 {{ .MgmtIPv4Gateway }}
ipv6 route {{ if .Env.CLAB_MGMT_VRF }}vrf {{ .Env.CLAB_MGMT_VRF }}{{end}}::/0 Ethernet0/0 {{ .MgmtIPv6Gateway }}
!
ip ssh version 2
crypto key generate rsa modulus 2048
!
line vty 0 4
 login local
 transport input ssh
!
end
